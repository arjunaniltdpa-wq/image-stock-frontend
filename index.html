<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

  <title>Free HD Wallpapers, 4K Images & Royalty-Free Stock Photos | Pixeora</title>

  <!-- SEO -->
  <meta name="robots" content="index, follow">
  <meta name="description" content="Download free HD wallpapers, 4K backgrounds, royalty-free stock images and commercial-use photos. Fast loading, clean UI, daily new premium-quality photos.">
  <meta name="keywords" content="free hd wallpapers, 4k wallpapers download, stock images free, royalty free images, commercial use photos free, pixeora images">
  <link rel="canonical" href="https://pixeora.com/">

  <!-- Preconnect -->
  <link rel="preconnect" href="https://cdn.pixeora.com" crossorigin>
  <link rel="preconnect" href="https://api.pixeora.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- DNS Prefetch -->
  <link rel="dns-prefetch" href="https://cdn.pixeora.com">
  <link rel="dns-prefetch" href="https://api.pixeora.com">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/images/logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png">
  <link rel="apple-touch-icon" href="/images/logo.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#000000">

  <!-- Preload LCP -->
  <link rel="preload" href="images/banner.jpg" as="image" type="image/jpeg">

  <!-- CSS -->
  <link rel="stylesheet" href="css/cookie.css">
  <link rel="stylesheet" href="css/style.css">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Pixeora",
    "url": "https://pixeora.com/",
    "logo": "https://pixeora.com/images/logo.png"
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Pixeora",
    "url": "https://pixeora.com/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://pixeora.com/search.html?query={search_term}",
      "query-input": "required name=search_term"
    }
  }
  </script>

</head>

<body>

<header class="top-header">
  <div class="top-nav-container">
    <a href="/" class="logo" aria-label="Pixeora Homepage">Pixeora</a>

    <nav class="nav-links">
      <ul class="nav-menu">
        <li>
          <a href="legal.html" class="legal-link-header">Legal & Policies</a>
        </li>

        <li class="dropdown">
          <button class="dropdown-btn" aria-label="AI Tools Menu">AI Tools</button>
          <ul class="dropdown-content">
            <li><a href="upscale.html">Upscale</a></li>
            <li><a href="bgremove.html">BG Remove</a></li>
            <li><a href="imagecompressor.html">Image Compressor</a></li>
            <li><a href="formatconverter.html">Format Converter</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">

  <!-- BANNER -->
  <section class="banner">
    <div class="banner-content">
      <form class="search-bar-wrapper">
        <div class="search-bar-border">
          <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search Images" required>
            <button type="submit" class="search-icon">
              <img src="images/search-icon.png" alt="Search" style="width:20px; height:20px;">
            </button>
          </div>
        </div>
      </form>

      <h1 class="banner-text">Explore Free HD Wallpapers & Images</h1>
    </div>
  </section>

  <!-- CATEGORIES -->
  <section class="categories">
    <div class="category-grid">
      <a href="search.html?query=nature" class="category">Nature</a>
      <a href="search.html?query=business" class="category">Business</a>
      <a href="search.html?query=technology" class="category">Technology</a>
      <a href="search.html?query=travel" class="category">Travel</a>
      <a href="search.html?query=food" class="category">Food</a>
      <a href="search.html?query=architecture" class="category">Architecture</a>
      <a href="search.html?query=fashion" class="category">Fashion</a>
      <a href="search.html?query=abstract" class="category">Abstract</a>
      <a href="search.html?query=anime" class="category">Anime</a>
    </div>
  </section>

  <!-- POPULAR IMAGES -->
  <section class="related-wrapper">
    <div class="masonry-grid" id="related-masonry">
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>
    </div>
  </section>

</main>

<div id="cookie-banner" class="premium-cookie">
  <div class="cookie-content">
    <p class="cookie-message">
      We use cookies to enhance your browsing experience and analyze traffic.
    </p>
    <button id="cookie-accept" class="cookie-btn-premium">Got it</button>
  </div>
</div>

<script>
const API_BASE = "https://api.pixeora.com";
let page = 1;
let loading = false;
const limit = 36;


/* FIXED MASONRY COLUMNS (SAME AS SEARCH PAGE) */
const masonry = document.getElementById("related-masonry");
const cols = Array.from(masonry.querySelectorAll(".masonry-col"));
let colIndex = 0;


function downloadImage(rawName) {
  window.location.href = `${API_BASE}/api/images/download/${encodeURIComponent(rawName)}`;
}

function createImageCard(img) {
  const div = document.createElement("div");
  div.classList.add("image-item");

  const url = img.thumbnailUrl || `/api/images/file/${img.thumbnailFileName}`;

  div.innerHTML = `
    <div class="image-wrapper">
      <div class="skeleton"></div>

      <a href="/photo/${img.slug}-${img._id}">
        <img 
          data-src="${url}"
          class="lazy-img image-load"
          alt="${img.alt || ''}"
          width="400"
          height="260"
          loading="lazy"
          decoding="async"
          fetchpriority="low"
        >
      </a>

      <span class="download-overlay"
        onclick="downloadImage('${img.fileName.replace(/'/g, "\\'")}')"
      ></span>
    </div>
  `;
  return div;
}

function addToNextColumn(card) {
  cols[colIndex].appendChild(card);
  colIndex = (colIndex + 1) % cols.length;
}


async function loadInitialImages() {
  try {
    loading = true;

    // âœ… RESET ON FIRST LOAD ONLY
    cols.forEach(col => col.innerHTML = "");
    colIndex = 0;
    page = 1;

    const res = await fetch(`${API_BASE}/api/images/popular-latest?page=1&limit=12`);
    const data = await res.json();

    (data.images || []).forEach(img => {
      addToNextColumn(createImageCard(img));
    });

    lazyLoadInit();
    page = 2;
    loading = false;

    setTimeout(checkPageHeight, 500);
  } catch (err) {
    console.error("INITIAL LOAD ERROR:", err);
    loading = false;
  }
}

/* Auto load if page height is small */
function checkPageHeight() {
  if (document.body.offsetHeight < window.innerHeight + 200 && !loading) {
    loadImages();
    setTimeout(checkPageHeight, 700);
  }
}

/* ================= LOAD MORE (FINAL) ================= */
async function loadImages() {
  if (loading) return;
  loading = true;

  try {
    const res = await fetch(
      `${API_BASE}/api/images/popular-latest?page=${page}&limit=${limit}`
    );
    const data = await res.json();

    (data.images || []).forEach(img => {
      addToNextColumn(createImageCard(img));
    });

    page++;
    lazyLoadInit();

  } catch (e) {
    console.error("LOAD ERROR:", e);
  }

  loading = false;
}

/* ================= LAZY LOAD (FIXED) ================= */
const lazyObserver = new IntersectionObserver(
  (entries, obs) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;

      const img = entry.target;
      img.src = img.dataset.src;

      img.onload = () => {
        img.classList.add("image-loaded");
        const skeleton = img.closest(".image-wrapper")?.querySelector(".skeleton");
        if (skeleton) skeleton.remove();
      };

      img.classList.remove("lazy-img");
      obs.unobserve(img);
    });
  },
  {
    rootMargin: "400px 0px",
    threshold: 0
  }
);

function lazyLoadInit() {
  document.querySelectorAll("img.lazy-img").forEach(img => {
    lazyObserver.observe(img);
  });
}

/* ================= INFINITE SCROLL ================= */
function onScroll() {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 800) {
    loadImages();
  }
}
window.addEventListener("scroll", onScroll);

/* START */
loadInitialImages();

/* ================= SEARCH ================= */
document.querySelector(".search-bar-wrapper").addEventListener("submit", e => {
  e.preventDefault();
  const q = document.getElementById("searchInput").value.trim();
  if (q) window.location.href = `search.html?query=${encodeURIComponent(q)}`;
});

/* ================= SUGGESTIONS ================= */
const input = document.getElementById("searchInput");
const suggestionBox = document.createElement("div");
suggestionBox.id = "suggestionBox";
Object.assign(suggestionBox.style, {
  position: "absolute",
  background: "white",
  width: "100%",
  zIndex: "2000",
  borderRadius: "6px",
  boxShadow: "0 3px 10px rgba(0,0,0,0.2)"
});
input.parentNode.appendChild(suggestionBox);

let suggestTimer;
input.addEventListener("input", () => {
  clearTimeout(suggestTimer);
  const q = input.value.trim();
  if (q.length < 2) return (suggestionBox.innerHTML = "");

  suggestTimer = setTimeout(async () => {
    const res = await fetch(`${API_BASE}/api/suggest?q=${encodeURIComponent(q)}`);
    const suggestions = await res.json();
    suggestionBox.innerHTML = suggestions
      .map(s => `<div class="suggest-item" style="padding:10px;cursor:pointer">${s}</div>`)
      .join("");

    document.querySelectorAll(".suggest-item").forEach(item => {
      item.onclick = () => {
        input.value = item.innerText;
        suggestionBox.innerHTML = "";
      };
    });
  }, 200);
});

/* ================= COOKIE ================= */
document.addEventListener("DOMContentLoaded", () => {
  const banner = document.getElementById("cookie-banner");
  const acceptBtn = document.getElementById("cookie-accept");

  if (!localStorage.getItem("cookieConsent")) {
    setTimeout(() => banner.classList.add("show"), 500);
  }

  acceptBtn.addEventListener("click", () => {
    localStorage.setItem("cookieConsent", "true");
    banner.classList.remove("show");
  });
});
</script>
