<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- =========================
       TITLE (High CTR + Long-Tail)
  ========================== -->
  <title>Free HD Wallpapers, 4K Images & Royalty-Free Stock Photos | Pixeora</title>

  <!-- =========================
       TIER 1 & TIER 2 LONG-TAIL SEO
  ========================== -->
  <meta name="description" 
    content="Download free HD wallpapers, 4K backgrounds, royalty-free stock images and commercial-use photos. Optimized for USA, UK, Canada, Australia, Germany, India & worldwide. Fast loading, clean UI, daily new premium-quality photos." />

  <meta name="keywords" content="
    free hd wallpapers, 4k wallpapers download, stock images free, royalty free images,
    commercial use photos free, high resolution backgrounds, free wallpapers USA,
    free stock photos UK, HD images Canada, free wallpapers Australia, HD stock photos Germany,
    best free image download site, aesthetic wallpapers 4k, nature wallpapers 4k, 
    business stock images free, trending wallpapers 2025, hd desktop backgrounds,
    mobile wallpapers full hd, free images for designers, marketing images free, 
    seo optimized stock photos, Pixeora images
  " />

  <!-- Canonical -->
  <link rel="canonical" href="https://pixeora.com/" />

  <!-- =========================
       Performance Boost
  ========================== -->

  <!-- CDN -->
  <link rel="preconnect" href="https://cdn.pixeora.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.pixeora.com">

  <!-- API -->
  <link rel="preconnect" href="https://api.pixeora.com" crossorigin>
  <link rel="dns-prefetch" href="https://api.pixeora.com">

  <!-- Google Fonts Optimization -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Preload Hero Banner for LCP -->
  <link rel="preload" href="images/banner.jpg" as="image">

  <!-- =========================
       Fonts
  ========================== -->
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">

  <!-- =========================
      Social Sharing (OG/Twitter)
  ========================== -->
  <meta property="og:title" content="Pixeora - Free HD Wallpapers & Royalty-Free Stock Images" />
  <meta property="og:description" 
    content="Browse & download free high-resolution wallpapers, 4K backgrounds, and royalty-free stock images. Updated daily. Fast loading for USA, UK, Canada, India & worldwide." />
  <meta property="og:image" content="https://pixeora.com/images/og-image.jpg" />
  <meta property="og:url" content="https://pixeora.com/" />
  <meta property="og:type" content="website" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Pixeora - Free HD Wallpapers & 4K Images" />
  <meta name="twitter:description" 
    content="Download premium HD wallpapers, 4K backgrounds and royalty-free stock photos for commercial use." />
  <meta name="twitter:image" content="https://pixeora.com/images/og-image.jpg" />

  <!-- =========================
       Structured Data (SEO Boost)
  ========================== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Pixeora",
    "url": "https://pixeora.com/",
    "description": "Free HD wallpapers, 4K backgrounds and royalty-free stock photos for designers, bloggers, marketers and commercial use.",
    "inLanguage": "en",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://pixeora.com/search.html?query={search_term}",
      "query-input": "required name=search_term"
    }
  }
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- Cache Control (Best Practices) -->
  <meta http-equiv="Cache-Control" content="public, max-age=31536000" />
</head>

<body>

<header class="top-header">
  <div class="top-nav-container">
    <div class="logo">Pixeora</div>

    <nav class="nav-links">
      <ul class="nav-menu">
        <li><a href="legal.html" class="legal-link-header">Legal & Policies</a></li>
        <li class="dropdown">
          <a href="#">AI Tools</a>
          <ul class="dropdown-content">
            <li><a href="upscale.html">Upscale</a></li>
            <li><a href="bgremove.html">BG Remove</a></li>
            <li><a href="imagecompressor.html">Image Compressor</a></li>
            <li><a href="formatconverter.html">Format Converter</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">

  <!-- BANNER -->
  <section class="banner">
    <div class="banner-content">
      <form class="search-bar-wrapper">
        <div class="search-bar-border">
          <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search Images" required>
            <button type="submit" class="search-icon">
              <img src="images/search-icon.png" alt="Search" style="width:20px; height:20px;">
            </button>
          </div>
        </div>
      </form>

      <h2 class="banner-text">
        Explore Free HD Wallpapers & Images
      </h2>
    </div>
  </section>

  <!-- CATEGORIES -->
  <section class="categories">
    <div class="category-grid">
      <a href="search.html?query=nature" class="category">Nature</a>
      <a href="search.html?query=business" class="category">Business</a>
      <a href="search.html?query=technology" class="category">Technology</a>
      <a href="search.html?query=travel" class="category">Travel</a>
      <a href="search.html?query=food" class="category">Food</a>
      <a href="search.html?query=architecture" class="category">Architecture</a>
      <a href="search.html?query=fashion" class="category">Fashion</a>
      <a href="search.html?query=abstract" class="category">Abstract</a>
      <a href="search.html?query=anime" class="category">Anime</a>
    </div>
  </section>

  <!-- POPULAR IMAGES -->
  <section class="popular-images">
    <div class="masonry-grid" id="masonry">
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>
      <div class="masonry-col"></div>      
    </div>
      
  </section>

</main>
<script>
const API_BASE = "https://api.pixeora.com";
let page = 1;
let loading = false;
const limit = 36;

/* Get masonry columns */
const masonry = document.getElementById("masonry");
const cols = Array.from(document.querySelectorAll(".masonry-col"));

let colIndex = 0; // cycle 1-2-3-4 like Pexels

function downloadImage(rawName) {
  window.location.href = `${API_BASE}/api/images/download/${encodeURIComponent(rawName)}`;
}

function createImageCard(img) {
  const div = document.createElement("div");
  div.classList.add("image-item");

  const url = img.thumbnailUrl || `/api/images/file/${img.thumbnailFileName}`;

  div.innerHTML = `
    <div class="image-wrapper">
      <div class="skeleton"></div>

      <a href="/photo/${img.slug}-${img._id}">
        <img 
          data-src="${url}" 
          class="lazy-img image-load"
          alt="${img.alt || ''}"
        >
      </a>

      <span class="download-overlay"
        onclick="downloadImage('${img.fileName.replace(/'/g, "\\'")}')"></span>
    </div>
  `;

  return div;
}

function addToNextColumn(card) {
  cols[colIndex].appendChild(card);
  colIndex = (colIndex + 1) % cols.length;
}

/* ⭐⭐⭐ INITIAL IMAGE LOAD (12 images instantly) ⭐⭐⭐ */
async function loadInitialImages() {
  try {
    loading = true;

    const res = await fetch(`${API_BASE}/api/images/popular?page=1&limit=12`);
    const data = await res.json();
    const images = data.images || [];

    images.forEach(img => {
      const card = createImageCard(img);
      addToNextColumn(card);
    });

    lazyLoadInit();
    applyImageLoadAnimation();

    page = 2;
    loading = false;

  } catch (err) {
    console.error("INITIAL LOAD ERROR:", err);
  }
}

/* LOAD IMAGES (infinite scroll) */
async function loadImages() {
  if (loading) return;
  loading = true;

  try {
    const res = await fetch(`${API_BASE}/api/images/popular?page=${page}&limit=${limit}`);
    const data = await res.json();
    const images = data.images || [];

    images.forEach(img => {
      const card = createImageCard(img);
      addToNextColumn(card);
    });

    page++;
    lazyLoadInit();
    applyImageLoadAnimation();

  } catch (e) {
    console.error("LOAD ERROR:", e);
  }

  loading = false;
}

/* ⭐⭐⭐ UPDATED LAZY LOAD FIX — loads before entering viewport ⭐⭐⭐ */
function lazyLoadInit() {
  const lazyImages = document.querySelectorAll("img.lazy-img");

  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;

        const img = entry.target;
        img.src = img.dataset.src;

        img.onload = () => {
          img.classList.add("image-loaded");
          const skeleton = img.closest(".image-wrapper")?.querySelector(".skeleton");
          if (skeleton) skeleton.remove();
        };

        img.classList.remove("lazy-img");
        obs.unobserve(img);
      });
    },
    {
      rootMargin: "300px 0px 300px 0px",   // ⭐ KEY FIX
      threshold: 0
    }
  );

  lazyImages.forEach(img => observer.observe(img));
}

/* PREMIUM FADE-IN */
function applyImageLoadAnimation() {
  document.querySelectorAll(".image-load").forEach(img => {
    img.onload = () => {
      img.classList.add("image-loaded");

      const skeleton = img.closest(".image-wrapper").querySelector(".skeleton");
      if (skeleton) skeleton.remove();
    };
  });
}

/* INFINITE SCROLL */
function onScroll() {
  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 300) {
    loadImages();
  }
}
window.addEventListener("scroll", onScroll);

/* ⭐ Call instant initial load ⭐ */
loadInitialImages();

/* SEARCH EVENT */
document.querySelector(".search-bar-wrapper").addEventListener("submit", e => {
  e.preventDefault();
  const q = document.getElementById("searchInput").value.trim();
  if (q) window.location.href = `search.html?query=${encodeURIComponent(q)}`;
});

/* SUGGESTIONS */
const input = document.getElementById("searchInput");
const suggestionBox = document.createElement("div");
suggestionBox.id = "suggestionBox";
Object.assign(suggestionBox.style, {
  position: "absolute",
  background: "white",
  width: "100%",
  zIndex: "2000",
  borderRadius: "6px",
  boxShadow: "0 3px 10px rgba(0,0,0,0.2)"
});
input.parentNode.appendChild(suggestionBox);

let suggestTimer;

input.addEventListener("input", () => {
  clearTimeout(suggestTimer);
  const q = input.value.trim();

  if (q.length < 2) {
    suggestionBox.innerHTML = "";
    return;
  }

  suggestTimer = setTimeout(async () => {
    const res = await fetch(`${API_BASE}/api/suggest?q=${encodeURIComponent(q)}`);
    const suggestions = await res.json();

    suggestionBox.innerHTML = suggestions
      .map(s => `<div class="suggest-item" style="padding:10px;cursor:pointer">${s}</div>`)
      .join("");

    document.querySelectorAll(".suggest-item").forEach(item => {
      item.onclick = () => {
        input.value = item.innerText;
        suggestionBox.innerHTML = "";
      };
    });
  }, 200);
});
</script>
